{% extends 'base.html' %}
{% load static %}
{% block content %}

<style>
    .font-weight-semi-bold {
        font-size: 18px;
    }
    .titles {
        font-weight: 600;
    }
</style>
<div class="parent mx-3" style="margin-top: 5rem;margin-bottom: 20rem;">
    <div class="container">
        <div class="row">
            <div class="card card-page py-3 mt-2 col-lg-9">
                <div class="card-body">
                  <h4 style="text-transform: capitalize;" class="card-title">
                    <span class="titles">Event Name: </span>
                    <span class="font-weight-semi-bold">{{event.event_name}}</span>
                </h4>
                  <h4 style="text-transform: capitalize;" class="card-title">
                    <span class="titles">Event Location: </span>
                    <span class="font-weight-semi-bold">{{event.event_location}}</span>
                </h4>
                  <h4 style="text-transform: capitalize;" class="card-title">
                    <span class="titles">Event Date: </span>
                    <span class="font-weight-semi-bold">{{event.event_date}}</span>
                </h4>
                  <h4 style="text-transform: capitalize;" class="card-title">
                    <span class="titles">Event Time: </span>
                    <span class="font-weight-semi-bold" style="text-transform: uppercase">{{event.event_time}}</span>
                </h4>
                <h4 style="text-transform: capitalize;" class="card-title">
                    <span class="titles">Event Url</span>
                    <span style="font-size: 14px; text-transform: lowercase;">(to join the event online): </span>
                    <span class="font-weight-semi-bold">
                        {% if event.event_url %}
                        <a style="text-transform: lowercase;" href="{{event.event_url}}">{{event.event_url}}</a>
                        {% else %}
                        <span style="text-transform: lowercase;">Not provided</span>
                        {% endif %}
                    </span>
                </h4>
                <h4 style="text-transform: capitalize;" class="card-title">
                    <span class="titles">Event Details: </span>
                    <span class="font-weight-semi-bold ml-3 mt-1">{{event.event_description|safe}}</span>
                </h4>
                    {% if request.user.is_staff %}
                    <div>
                        <a href="{% url 'events:update_event' event.event_id %}" class="update btn" style="background-color: #CBAA80;">Update Event</a>
                        <a href="{% url 'events:del_event' event.event_id %}" class="delete btn" style="background-color: red;color: #fff;border: none;float: right;" onclick="return confirm('Are you sure you want to delete this event?')">Delete Event</a>
                    </div>
                    {% endif %}
                </div>
              </div>
            <div class="col-md-6 mx-3">
                <div class="" style="display: block;">
                    <div class="">
                        <div class="justify-content-center border-secondary mt-5 mb-3">
                            <h4 class="font-weight-bold">Questions({{ questions.length }})</h4>
                        </div>
                        <div class="mb-5 ml-3">
                            {% for q in questions %}
                            <div class="mb-5">
                                <p class="h5">{{q.question}}</p>
                                <small>{{ q.user.first_name }} {{ q.user.last_name }}<small> - <i>{{ q.date_asked }}</i></small></small>
                                <p id="ansLink">View Answer</p>
                                <p id="ans" style="display: no;">
                                    {% for ans in answers %}
                                    
                                    {% if ans.answer %}
                                    <p>{{ ans.answer }}</p>
                                    {% else %}
                                    <p>This question has not been answered.</p>
                                    {% endif %}
                                    
                                    {% endfor %}
                                </p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    
</div>
<script>
    let ansLink = document.getElementById('ansLink');
    ansLink.addEventListener('click', function (){displayAnsFunc()}, false);
    function displayAnsFunc() {
        let ans = document.getElementById('ans');
        if (ans.classList.contains('first')) {
            ans.style.display = 'block';
        }
        else {
            ans.style.display = 'none';
        }
    }
</script>
{% endblock %}